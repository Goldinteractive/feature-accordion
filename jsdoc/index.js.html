<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Handorgel from 'handorgel'

import { INITIAL_OPEN_DELAY } from 'handorgel/src/fold'

/**
 * Accordion feature class.
 */
class Accordion extends base.features.Feature {

  init() {
    this.handorgel = new Handorgel(this.node, this.options)

    if (this.options.initialOpenTransition) {
      window.setTimeout(() => {
        this._init(true)
      }, INITIAL_OPEN_DELAY)
    } else {
      this._init(false)
    }
  }

  update(transition = true) {
    var hash = base.utils.url.hash()

    if (hash.indexOf('/') === 0) {
      var id = hash.substr(1)
      var $header = this.$(`[data-accordion-scroll-id="${id}"]`)

      if (this.options.cleanHashAfterScrolling) {
        history.pushState('', document.title, window.location.pathname + window.location.search)
      }

      if ($header &amp;&amp; $header.handorgelFold) {
        if ($header.handorgelFold.expanded) { // fold is open
          // scroll directly to it
          this.scrollToHeader($header)
        } else {
          // scroll to fold after it has opened
          this.handorgel.once('fold:opened', () => {
            this.scrollToHeader($header)
          })

          $header.handorgelFold.open(transition)
        }
      }
    }
  }

  scrollToHeader($header) {
    if (!this.options.scroller) {
      return
    }

    this.options.scroller.toElement($header, {
      // focus fold when scrolling has finished
      cb: () => {
        $header.handorgelFold.focus()
      }
    })
  }

  destroy() {
    super.destroy()
    this.handorgel.destroy()
  }

  _init(transition) {
    this.update(transition)
    this.addEventListener(window, 'hashchange', this._hashChanged())
  }

  _hashChanged() {
    return (e) => {
      this.update()
    }
  }

}

Accordion.defaultOptions = {
  scroller: null,
  cleanHashAfterScrolling: true,
  // handorgel options
  initialOpenTransition: true
}

export default Accordion
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Accordion.html">Accordion</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Mar 09 2017 16:49:42 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
