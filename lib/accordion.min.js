!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("accordion",[],n):"object"==typeof exports?exports.accordion=n():t.accordion=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){var i,o,s;!function(r,a){var l;o=[t,n(1)],i=a,void 0!==(s="function"==typeof i?i.apply(t,o):i)&&(e.exports=s)}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"init",value:function e(){var t=this;this.handorgel=new r.default(this.node,this.options),this.options.initialOpenTransition?window.setTimeout(function(){t._init(!0)},this.options.initialOpenTransitionDelay||r.default.defaultOptions.initialOpenTransitionDelay):this._init(!1)}},{key:"update",value:function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=base.utils.url.hash();if(0===i.indexOf("/")){var o=i.substr(1),s=this.$('[data-accordion-scroll-id="'+o+'"]');s&&s.handorgelFold&&(this.options.cleanHashAfterScrolling&&history.replaceState("",document.title,window.location.pathname+window.location.search),s.handorgelFold.expanded?this.scrollToHeader(s):(this.handorgel.once("fold:opened",function(){t.scrollToHeader(s)}),s.handorgelFold.open(n)))}}},{key:"scrollToHeader",value:function e(t){this.options.scroller&&this.options.scroller.toElement(t,{cb:function e(){t.handorgelFold.focus()}})}},{key:"destroy",value:function e(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.handorgel.destroy()}},{key:"_init",value:function e(t){this.update(t),this.addEventListener(window,"hashchange",this._hashChanged())}},{key:"_hashChanged",value:function e(){var t=this;return function(e){t.update()}}}]),t}(base.features.Feature);h.defaultOptions={scroller:null,cleanHashAfterScrolling:!0,initialOpenTransition:!0},e.default=h})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function i(e){return void 0===e}function o(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return i(e[t])||n&&n.writable}function s(e){for(var t=void 0,n=arguments,i=1;i<n.length;++i)if(t=n[i])for(var s in t)o(e,s)&&(e[s]=t[s]);return e}/** handorgel v0.4.1, @license MIT */
var r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=n(function(e){!function(t,n){e.exports?e.exports=n():t.EvEmitter=n()}("undefined"!=typeof window?window:r,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var s=n[o];i&&i[s]&&(this.off(e,s),delete i[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})}),l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}(),h=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,o){var a={key:e,arg:t,resolve:n,reject:o,next:null};r?r=r.next=a:(s=r=a,i(e,t))})}function i(n,s){try{var r=t[n](s),a=r.value;a instanceof e?Promise.resolve(a.value).then(function(e){i("next",e)},function(e){i("throw",e)}):o(r.done?"return":"normal",r.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":s.resolve({value:t,done:!0});break;case"throw":s.reject(t);break;default:s.resolve({value:t,done:!1})}s=s.next,s?i(s.key,s.arg):r=null}var s,r;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p={},v={button:{"aria-controls":function e(){return this.id+"-content"},"aria-expanded":function e(){return this.expanded?"true":"false"},"aria-disabled":function e(){return this.disabled?"true":"false"}},content:{role:function e(){return"region"},"aria-labelledby":function e(){return this.id+"-header"}}},b={arrowDown:40,arrowUp:38,pageUp:33,pageDown:34,end:35,home:36},y=function(){function e(t,n,i){d(this,e),n.handorgelFold||(this.handorgel=t,this.header=n,this.button=n.firstElementChild,this.content=i,this.header.handorgelFold=this,this.content.handorgelFold=this,p[this.handorgel.id]||(p[this.handorgel.id]=0),this.id=this.handorgel.id+"-fold"+ ++p[this.handorgel.id],this.header.setAttribute("id",this.id+"-header"),this.content.setAttribute("id",this.id+"-content"),this.focused=!1,this.expanded=!1,this.disabled=!1,this._listeners={},this._bindEvents(),this._initAria(),this._initialOpen(),this._initialFocus())}return u(e,[{key:"open",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded||(this.handorgel.emitEvent("fold:open",[this]),this.expanded=!0,this.handorgel.options.collapsible||this.disable(),this._updateAria("button","aria-expanded"),this.header.classList.add(this.handorgel.options.headerOpenClass),this.content.classList.add(this.handorgel.options.contentOpenClass),this.resize(t),t||this._opened())}},{key:"close",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded&&(this.handorgel.emitEvent("fold:close",[this]),this.expanded=!1,this.handorgel.options.collapsible||this.enable(),this._updateAria("button","aria-expanded"),this.header.classList.remove(this.handorgel.options.headerOpenedClass),this.content.classList.remove(this.handorgel.options.contentOpenedClass),this.resize(t),t||this._closed())}},{key:"disable",value:function e(){this.disabled=!0,this._updateAria("button","aria-disabled"),this.header.classList.add(this.handorgel.options.headerDisabledClass),this.content.classList.add(this.handorgel.options.contentDisabledClass)}},{key:"enable",value:function e(){this.disabled=!1,this._updateAria("button","aria-disabled"),this.header.classList.remove(this.handorgel.options.headerDisabledClass),this.content.classList.remove(this.handorgel.options.contentDisabledClass)}},{key:"focus",value:function e(){this.button.focus()}},{key:"blur",value:function e(){this.button.blur()}},{key:"toggle",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded?this.close(t):this.open(t)}},{key:"resize",value:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;n||(this.header.classList.add(this.handorgel.options.headerNoTransitionClass),this.content.classList.add(this.handorgel.options.contentNoTransitionClass)),this.expanded&&(i=this.content.firstElementChild.offsetHeight),this.content.style.height=i+"px",n||l(function(){t.header.classList.remove(t.handorgel.options.headerNoTransitionClass),t.content.classList.remove(t.handorgel.options.contentNoTransitionClass)})}},{key:"destroy",value:function e(){this._unbindEvents(),this._cleanAria(),this.header.classList.remove(this.handorgel.options.headerOpenClass),this.header.classList.remove(this.handorgel.options.headerOpenedClass),this.header.classList.remove(this.handorgel.options.headerFocusClass),this.header.classList.remove(this.handorgel.options.headerNoTransitionClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.content.classList.remove(this.handorgel.options.contentOpenedClass),this.content.classList.remove(this.handorgel.options.contentFocusClass),this.content.classList.remove(this.handorgel.options.contentNoTransitionClass),this.content.style.height="0px",this.header.handorgelFold=null,this.content.handorgelFold=null,this.header.removeAttribute("id"),this.content.removeAttribute("id"),this.handorgel=null}},{key:"_opened",value:function e(){this.header.classList.add(this.handorgel.options.headerOpenedClass),this.content.classList.add(this.handorgel.options.contentOpenedClass),this.handorgel.emitEvent("fold:opened",[this])}},{key:"_closed",value:function e(){this.header.classList.remove(this.handorgel.options.headerOpenClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.handorgel.emitEvent("fold:closed",[this])}},{key:"_initialOpen",value:function e(){var t=this;null===this.header.getAttribute(this.handorgel.options.initialOpenAttribute)&&null===this.content.getAttribute(this.handorgel.options.initialOpenAttribute)||(this.handorgel.options.initialOpenTransition?window.setTimeout(function(){t.open()},this.handorgel.options.initialOpenTransitionDelay):this.open(!1))}},{key:"_initialFocus",value:function e(){null!==this.button.getAttribute("autofocus")&&this._handleFocus()}},{key:"_initAria",value:function e(){this._updateAria("button"),this._updateAria("content")}},{key:"_cleanAria",value:function e(){this._updateAria("button",null,!0),this._updateAria("content",null,!0)}},{key:"_updateAria",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.handorgel.options.ariaEnabled)if(n){var o=v[t][n].call(this);this[t].setAttribute(n,o)}else for(var s in v[t])if(v[t].hasOwnProperty(s))if(i)this[t].removeAttribute(s);else{var r=v[t][s].call(this);this[t].setAttribute(s,r)}}},{key:"_handleContentTransitionEnd",value:function e(t){t.target===t.currentTarget&&"height"==t.propertyName&&(this.handorgel.resize(!0),this.expanded?this._opened():this._closed())}},{key:"_handleFocus",value:function e(){this.focused=!0,this.header.classList.add(this.handorgel.options.headerFocusClass),this.content.classList.add(this.handorgel.options.contentFocusClass),this.handorgel.emitEvent("fold:focus",[this])}},{key:"_handleBlur",value:function e(){this.focused=!1,this.header.classList.remove(this.handorgel.options.headerFocusClass),this.content.classList.remove(this.handorgel.options.contentFocusClass),this.handorgel.emitEvent("fold:blur",[this])}},{key:"_handleButtonClick",value:function e(t){this.focus(),this.disabled||this.toggle()}},{key:"_handleButtonKeydown",value:function e(t){if(this.handorgel.options.keyboardInteraction){var n=null;switch(t.which){case b.arrowDown:n="next";break;case b.arrowUp:n="prev";break;case b.home:n="first";break;case b.end:n="last";break;case b.pageDown:t.ctrlKey&&(n="next");break;case b.pageUp:t.ctrlKey&&(n="prev")}n&&(t.preventDefault(),this.handorgel.focus(n))}}},{key:"_handleContentKeydown",value:function e(t){if(this.handorgel.options.keyboardInteraction&&t.ctrlKey){var n=null;switch(t.which){case b.pageDown:n="next";break;case b.pageUp:n="prev"}n&&(t.preventDefault(),this.handorgel.focus(n))}}},{key:"_bindEvents",value:function e(){this._listeners={bFocus:["focus",this.button,this._handleFocus.bind(this)],bBlur:["blur",this.button,this._handleBlur.bind(this)],bClick:["click",this.button,this._handleButtonClick.bind(this)],bKeydown:["keydown",this.button,this._handleButtonKeydown.bind(this)],cKeydown:["keydown",this.content,this._handleContentKeydown.bind(this)],cTransition:["transitionend",this.content,this._handleContentTransitionEnd.bind(this)]};for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)){var n=this._listeners[t];n[1].addEventListener(n[0],n[2])}}},{key:"_unbindEvents",value:function e(){for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)){var n=this._listeners[t];n[1].removeEventListener(n[0],n[2])}}}]),e}(),g=0,_=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handorgel?f(i):(i.element=e,i.element.handorgel=i,i.id="handorgel"+ ++g,i.element.setAttribute("id",i.id),i.folds=[],i.options=s({},t.defaultOptions,n),i._listeners={},i._resizing=!1,i._bindEvents(),i._initAria(),i.update(),i)}return c(t,e),u(t,[{key:"update",value:function e(){this.folds=[];for(var t=this.element.children,n=0,i=t.length;n<i;n+=2){var o=t[n],s=o.handorgelFold;s||(s=new y(this,t[n],t[n+1])),this.folds.push(s)}}},{key:"resize",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.folds.forEach(function(e){e.resize(t)}),this._resizing=!1}},{key:"focus",value:function e(t){for(var n=this.folds.length,i=null,o=0;o<n&&null===i;o++)this.folds[o].focused&&(i=o);if("prev"!=t&&"next"!=t||null!==i||(t="prev"==t?"last":"first"),"prev"==t&&0==i){if(!this.options.carouselFocus)return;t="last"}if("next"==t&&i==n-1){if(!this.options.carouselFocus)return;t="first"}switch(t){case"prev":this.folds[--i].focus();break;case"next":this.folds[++i].focus();break;case"last":this.folds[n-1].focus();break;case"first":default:this.folds[0].focus()}}},{key:"destroy",value:function e(){this.emitEvent("destroy"),this.element.removeAttribute("id"),this.folds.forEach(function(e){e.destroy()}),this._unbindEvents(),this._cleanAria(),this.element.handorgel=null,this.emitEvent("destroyed")}},{key:"_handleFoldOpen",value:function e(t){this.options.multiSelectable||this.folds.forEach(function(e){t!==e&&e.close()})}},{key:"_handleResize",value:function e(){var t=this;this._resizing||(this._resizing=!0,l(function(){t.resize()}))}},{key:"_initAria",value:function e(){this.options.ariaEnabled&&(this.element.setAttribute("role","presentation"),this.options.multiSelectable&&this.element.setAttribute("aria-multiselectable","true"))}},{key:"_cleanAria",value:function e(){this.element.removeAttribute("role"),this.element.removeAttribute("aria-multiselectable")}},{key:"_bindEvents",value:function e(){this._listeners.resize=this._handleResize.bind(this),window.addEventListener("resize",this._listeners.resize),this._listeners.foldOpen=this._handleFoldOpen.bind(this),this.on("fold:open",this._listeners.foldOpen)}},{key:"_unbindEvents",value:function e(){window.removeEventListener("resize",this._listeners.resize),this.off("fold:open",this._listeners.foldOpen)}}]),t}(a);_.defaultOptions={keyboardInteraction:!0,multiSelectable:!0,ariaEnabled:!0,collapsible:!0,carouselFocus:!0,initialOpenAttribute:"data-open",initialOpenTransition:!0,initialOpenTransitionDelay:200,headerOpenClass:"handorgel__header--open",contentOpenClass:"handorgel__content--open",headerOpenedClass:"handorgel__header--opened",contentOpenedClass:"handorgel__content--opened",headerDisabledClass:"handorgel__header--disabled",contentDisabledClass:"handorgel__content--disabled",headerFocusClass:"handorgel__header--focus",contentFocusClass:"handorgel__content--focus",headerNoTransitionClass:"handorgel__header--notransition",contentNoTransitionClass:"handorgel__content--notransition"},t.default=_}.call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])});
//# sourceMappingURL=accordion.min.js.map