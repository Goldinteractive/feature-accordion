!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("accordion",[],n):"object"==typeof exports?exports.accordion=n():t.accordion=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){!function t(n,i){e.exports=i()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){var i,s,o;!function(n,r){var a;s=[t],i=r,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e){return"undefined"==typeof e}Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefined=t;var n=e.rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),i=e.transitionEndEvent=function(){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&"undefined"!==e.style[n])return t[n]}()})},function(e,t,n){var i,s,o;!function(r,a){var l;s=[t,n(0)],i=a,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.INITIAL_OPEN_DELAY=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s={},o=e.INITIAL_OPEN_DELAY=200,r=function(){function e(t,i,o){n(this,e),i.handorgelFold||(this.handorgel=t,this.header=i,this.button=i.firstElementChild,this.content=o,this.header.handorgelFold=this,this.content.handorgelFold=this,s[this.handorgel.id]||(s[this.handorgel.id]=0),this.id=this.handorgel.id+"-fold"+ ++s[this.handorgel.id],this.focused=!1,this.expanded=!1,this.disabled=!1,this._ctrlKeyPressed=!1,this._bindEvents(),this._initAria(),this._initialOpen())}return i(e,[{key:"open",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded=!0,this.handorgel.emitEvent("fold:open",[this]),this.handorgel.ariaEnabled&&(this.button.setAttribute("aria-expanded","true"),this.handorgel.collapsible||this.disable()),this.header.classList.add(this.handorgel.headerOpenClass),this.content.classList.add(this.handorgel.contentOpenClass),this.resize(t),t||this.handorgel.emitEvent("fold:opened",[this])}},{key:"close",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded=!1,this.handorgel.emitEvent("fold:close",[this]),this.handorgel.ariaEnabled&&(this.button.setAttribute("aria-expanded","false"),this.enable()),this.header.classList.remove(this.handorgel.headerOpenClass),this.content.classList.remove(this.handorgel.contentOpenClass),this.resize(t),t||this.handorgel.emitEvent("fold:closed",[this])}},{key:"disable",value:function e(){this.disabled=!0,this.button.setAttribute("aria-disabled","true"),this.header.classList.add(this.handorgel.headerDisabledClass),this.content.classList.add(this.handorgel.contentDisabledClass)}},{key:"enable",value:function e(){this.disabled=!1,this.button.setAttribute("aria-disabled","false"),this.header.classList.remove(this.handorgel.headerDisabledClass),this.content.classList.remove(this.handorgel.contentDisabledClass)}},{key:"focus",value:function e(){this.button.focus()}},{key:"blur",value:function e(){this.button.blur()}},{key:"toggle",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded?this.close():this.open()}},{key:"resize",value:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;n||(this.header.classList.add(this.handorgel.headerNoTransitionClass),this.content.classList.add(this.handorgel.contentNoTransitionClass)),this.expanded&&(i=this.content.firstElementChild.offsetHeight),this.content.style.height=i+"px",window.setTimeout(function(){t.header.classList.remove(t.handorgel.headerNoTransitionClass),t.content.classList.remove(t.handorgel.contentNoTransitionClass)},0)}},{key:"destroy",value:function e(){this._unbindEvents(),this._cleanAria(),this.header.classList.remove(this.handorgel.headerOpenClass),this.header.classList.remove(this.handorgel.headerNoTransitionClass),this.content.classList.remove(this.handorgel.contentOpenClass),this.content.classList.remove(this.handorgel.contentNoTransitionClass),this.content.style.height="0px",this.header.handorgelFold=null,this.content.handorgelFold=null,this.handorgel=null}},{key:"_initialOpen",value:function e(){var t=this;null===this.header.getAttribute(this.handorgel.initialOpenAttribute)&&null===this.content.getAttribute(this.handorgel.initialOpenAttribute)||(this.handorgel.initialOpenTransition?window.setTimeout(function(){t.open()},o):this.open(!1))}},{key:"_initAria",value:function e(){this.handorgel.ariaEnabled&&(this.content.setAttribute("id",this.id+"-content"),this.content.setAttribute("role","region"),this.content.setAttribute("aria-labelledby",this.id+"-header"),this.button.setAttribute("id",this.id+"-header"),this.button.setAttribute("aria-controls",this.id+"-content"),this.button.setAttribute("aria-expanded","false"),this.button.setAttribute("aria-disabled","false"))}},{key:"_cleanAria",value:function e(){this.content.removeAttribute("id"),this.content.removeAttribute("role"),this.content.removeAttribute("aria-labelledby"),this.button.removeAttribute("id"),this.button.removeAttribute("aria-controls"),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-disabled")}},{key:"_handleTransitionEnd",value:function e(t){"height"==t.propertyName&&(this.handorgel.resize(!0),this.expanded?this.handorgel.emitEvent("fold:opened",[this]):this.handorgel.emitEvent("fold:closed",[this]))}},{key:"_handleFocus",value:function e(){this.focused=!0,this.handorgel.emitEvent("fold:focus",[this])}},{key:"_handleBlur",value:function e(){this.focused=!1,this.handorgel.emitEvent("fold:blur",[this])}},{key:"_handleButtonClick",value:function e(t){this.disabled||this.toggle()}},{key:"_handleButtonKeydown",value:function e(t){if(this.handorgel.keyboardInteraction)switch(t.which){case 40:t.preventDefault(),this.handorgel.focus("next");break;case 38:t.preventDefault(),this.handorgel.focus("prev");break;case 36:t.preventDefault(),this.handorgel.focus("first");break;case 35:t.preventDefault(),this.handorgel.focus("last");break;case 34:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("next"));break;case 33:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("prev"));break;case 17:this._ctrlKeyPressed=!0}}},{key:"_handleContentKeydown",value:function e(t){if(this.handorgel.keyboardInteraction)switch(t.which){case 34:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("next"));break;case 33:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("prev"));break;case 17:this._ctrlKeyPressed=!0}}},{key:"_handleKeyup",value:function e(){this._ctrlKeyPressed=!1}},{key:"_bindEvents",value:function e(){this._focusListener=this._handleFocus.bind(this),this._blurListener=this._handleBlur.bind(this),this._keyupListener=this._handleKeyup.bind(this),this._buttonClickListener=this._handleButtonClick.bind(this),this._buttonKeydownListener=this._handleButtonKeydown.bind(this),this.button.addEventListener("focus",this._focusListener),this.button.addEventListener("blur",this._blurListener),this.button.addEventListener("keyup",this._keyupListener),this.button.addEventListener("keydown",this._buttonKeydownListener),this.button.addEventListener("click",this._buttonClickListener),this._contentKeydownListener=this._handleContentKeydown.bind(this),this._contentTransitionListener=this._handleTransitionEnd.bind(this),this.content.addEventListener("focus",this._focusListener),this.content.addEventListener("blur",this._blurListener),this.content.addEventListener("keyup",this._keyupListener),this.content.addEventListener("keydown",this._contentKeydownListener),this.content.addEventListener(t.transitionEndEvent,this._contentTransitionListener)}},{key:"_unbindEvents",value:function e(){this.button.removeEventListener("click",this._buttonClickListener),this.button.removeEventListener("focus",this._focusListener),this.button.removeEventListener("blur",this._blurListener),this.button.removeEventListener("keyup",this._keyupListener),this.button.removeEventListener("keydown",this._buttonKeydownListener),this.content.removeEventListener(t.transitionEndEvent,this._contentTransitionListener),this.content.removeEventListener("focus",this._focusListener),this.content.removeEventListener("blur",this._blurListener),this.content.removeEventListener("keyup",this._keyupListener),this.content.removeEventListener("keydown",this._contentKeydownListener)}}]),e}();e.default=r})},function(e,t,n){var i,s;!function(o,r){i=r,s="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==s&&(e.exports=s))}("undefined"!=typeof window?window:this,function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return i.indexOf(t)==-1&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{},i=n[e]=n[e]||{};return i[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return i!=-1&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=0,s=n[i];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];s;){var r=o&&o[s];r&&(this.off(e,s),delete o[s]),s.apply(this,t),i+=r?0:1,s=n[i]}return this}},e})},function(e,t,n){var i,s,o;!function(r,a){var l;s=[t,n(2),n(0),n(1)],i=a,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=s(t),h=s(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=0,c=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handorgel?r(s):(s.element=e,s.element.handorgel=s,s.id="handorgel"+ ++d,s.folds=[],s.initialOpenAttribute=i.initialOpenAttribute||"data-open",s.headerOpenClass=i.headerOpenClass||"handorgel__header--open",s.contentOpenClass=i.contentOpenClass||"handorgel__content--open",s.headerDisabledClass=i.headerDisabledClass||"handorgel__header--disabled",s.contentDisabledClass=i.contentDisabledClass||"handorgel__content--disabled",s.headerNoTransitionClass=i.headerNoTransitionClass||"handorgel__header--notransition",s.contentNoTransitionClass=i.contentNoTransitionClass||"handorgel__content--notransition",s.initialOpenTransition=!!(0,n.isUndefined)(i.initialOpenTransition)||!!i.initialOpenTransition,s.keyboardInteraction=!!(0,n.isUndefined)(i.keyboardInteraction)||!!i.keyboardInteraction,s.multiSelectable=!!(0,n.isUndefined)(i.multiSelectable)||!!i.multiSelectable,s.ariaEnabled=!!(0,n.isUndefined)(i.ariaEnabled)||!!i.ariaEnabled,s.collapsible=!!(0,n.isUndefined)(i.collapsible)||!!i.collapsible,s.carouselFocus=!!(0,n.isUndefined)(i.carouselFocus)||!!i.carouselFocus,s._resizing=!1,s._bindEvents(),s._initAria(),s.update(),s)}return a(t,e),u(t,[{key:"update",value:function e(){this.folds=[];for(var t=this.element.children,n=0,i=t.length;n<i;n+=2){var s=t[n],o=t[n+1],r=s.handorgelFold;r||(r=new h.default(this,t[n],t[n+1])),this.folds.push(r)}}},{key:"resize",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.folds.forEach(function(e){e.resize(t)}),this._resizing=!1}},{key:"focus",value:function e(t){for(var n=null,i=this.folds.length,s=0;s<i&&null===n;s++)this.folds[s].focused&&(n=s);if("prev"!=t&&"next"!=t||null!==n||(t="prev"==t?"last":"first"),"prev"==t&&0==n){if(!this.carouselFocus)return;t="last"}if("next"==t&&n==i-1){if(!this.carouselFocus)return;t="first"}switch(t){case"prev":this.folds[--n].focus();break;case"next":this.folds[++n].focus();break;case"last":this.folds[i-1].focus();break;case"first":default:this.folds[0].focus()}}},{key:"destroy",value:function e(){this.emitEvent("destroy"),this.folds.forEach(function(e){e.destroy()}),this._unbindEvents(),this._cleanAria(),this.element.handorgel=null,this.emitEvent("destroyed")}},{key:"_handleFoldOpen",value:function e(t){this.multiSelectable||this.folds.forEach(function(e){t!==e&&e.close()})}},{key:"_handleResize",value:function e(){var t=this;this._resizing||(this._resizing=!0,(0,n.rAF)(function(){t.resize()}))}},{key:"_initAria",value:function e(){this.ariaEnabled&&(this.element.setAttribute("role","tablist"),this.multiSelectable&&this.element.setAttribute("aria-multiselectable","true"))}},{key:"_cleanAria",value:function e(){this.element.removeAttribute("role"),this.element.removeAttribute("aria-multiselectable")}},{key:"_bindEvents",value:function e(){this._resizeListener=this._handleResize.bind(this),window.addEventListener("resize",this._resizeListener),this._foldOpenListener=this._handleFoldOpen.bind(this),this.on("fold:open",this._foldOpenListener)}},{key:"_unbindEvents",value:function e(){window.removeEventListener("resize",this._resizeListener),this.off("open",this._foldOpenListener)}}]),t}(l.default);e.default=c})}])})},function(e,t,n){var i,s,o;!function(r,a){var l;s=[t,n(0)],i=a,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,n);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in s)return s.value;var r=s.get;if(void 0!==r)return r.call(i)},h=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"init",value:function e(){var t=this;this.handorgel=new r.default(this.node,this.options),this.options.initialOpenTransition?window.setTimeout(function(){t._init(!0)},200):this._init(!1)}},{key:"update",value:function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=base.utils.url.hash();if(0===i.indexOf("/")){var s=i.substr(1),o=this.$('[data-accordion-scroll-id="'+s+'"]');this.options.cleanHashAfterScrolling&&history.pushState("",document.title,window.location.pathname+window.location.search),o&&o.handorgelFold&&(o.handorgelFold.expanded?this.scrollToHeader(o):(this.handorgel.once("fold:opened",function(){t.scrollToHeader(o)}),o.handorgelFold.open(n)))}}},{key:"scrollToHeader",value:function e(t){this.options.scroller&&this.options.scroller.toElement(t,{cb:function e(){t.handorgelFold.focus()}})}},{key:"destroy",value:function e(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.handorgel.destroy()}},{key:"_init",value:function e(t){this.update(t),this.addEventListener(window,"hashchange",this._hashChanged())}},{key:"_hashChanged",value:function e(){var t=this;return function(e){t.update()}}}]),t}(base.features.Feature);h.defaultOptions={scroller:null,cleanHashAfterScrolling:!0,initialOpenTransition:!0},e.default=h})}])});
//# sourceMappingURL=accordion.min.js.map